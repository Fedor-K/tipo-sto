<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TIPO-STO</title>
    <link rel="stylesheet" href="/css/style.css">
</head>
<body>
    <div class="app">
        <!-- Sidebar Navigation -->
        <nav class="sidebar">
            <div class="logo">TIPO-STO</div>
            <div class="nav-item" data-page="dashboard">
                <span class="nav-icon">üìä</span>
                <span class="nav-text">–î–∞—à–±–æ—Ä–¥</span>
            </div>
            <div class="nav-item active" data-page="orders">
                <span class="nav-icon">üìã</span>
                <span class="nav-text">–ó–∞–∫–∞–∑—ã</span>
            </div>
            <div class="nav-item" data-page="clients">
                <span class="nav-icon">üë•</span>
                <span class="nav-text">–ö–ª–∏–µ–Ω—Ç—ã</span>
            </div>
            <div class="nav-item" data-page="cars">
                <span class="nav-icon">üöó</span>
                <span class="nav-text">–ê–≤—Ç–æ–º–æ–±–∏–ª–∏</span>
            </div>
        </nav>

        <!-- Main Content -->
        <main class="main">
            <!-- Dashboard Page -->
            <div id="page-dashboard" class="page hidden">
                <div class="page-header">
                    <h1>–î–∞—à–±–æ—Ä–¥</h1>
                </div>
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-value" id="stat-orders-today">0</div>
                        <div class="stat-label">–ó–∞–∫–∞–∑–æ–≤ —Å–µ–≥–æ–¥–Ω—è</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="stat-sum-today">0 ‚ÇΩ</div>
                        <div class="stat-label">–í—ã—Ä—É—á–∫–∞ —Å–µ–≥–æ–¥–Ω—è</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="stat-in-progress">0</div>
                        <div class="stat-label">–í —Ä–∞–±–æ—Ç–µ</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="stat-clients">0</div>
                        <div class="stat-label">–ö–ª–∏–µ–Ω—Ç–æ–≤</div>
                    </div>
                </div>
            </div>

            <!-- Orders List Page -->
            <div id="page-orders" class="page">
                <div class="page-header">
                    <h1>–ó–∞–∫–∞–∑-–Ω–∞—Ä—è–¥—ã</h1>
                    <input type="text" class="search-input" id="orders-search" placeholder="üîç –ü–æ–∏—Å–∫...">
                    <button class="btn btn-primary" onclick="App.showPage('clients')">+ –ù–æ–≤—ã–π –∑–∞–∫–∞–∑</button>
                </div>
                <div class="card">
                    <div id="orders-list" class="list-container">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
                </div>
            </div>

            <!-- Clients List Page -->
            <div id="page-clients" class="page hidden">
                <div class="page-header">
                    <h1>–ö–ª–∏–µ–Ω—Ç—ã</h1>
                    <input type="text" class="search-input" id="clients-search" placeholder="üîç –ü–æ–∏—Å–∫...">
                    <button class="btn btn-primary" onclick="App.openModal('new-client')">+ –ù–æ–≤—ã–π –∫–ª–∏–µ–Ω—Ç</button>
                </div>
                <div class="card">
                    <div id="clients-list" class="list-container">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
                </div>
            </div>

            <!-- Client Card Page -->
            <div id="page-client-card" class="page hidden">
                <div class="page-header">
                    <button class="back-btn" onclick="App.showPage('clients')">‚Üê –ù–∞–∑–∞–¥</button>
                    <h1 id="client-card-title">–ö–ª–∏–µ–Ω—Ç</h1>
                    <div class="spacer"></div>
                    <button class="btn btn-primary" onclick="App.showPage('order-form')">+ –ù–æ–≤—ã–π –∑–∞–∫–∞–∑</button>
                </div>
                <div class="client-header-card card">
                    <div class="client-header-content">
                        <div class="client-avatar" id="client-card-avatar">?</div>
                        <div class="client-header-info">
                            <div class="client-name" id="client-card-name">‚Äî</div>
                            <div class="client-type" id="client-card-type">‚Äî</div>
                        </div>
                    </div>
                    <div class="client-stats">
                        <div class="client-stat">
                            <div class="client-stat-value" id="client-stat-orders">0</div>
                            <div class="client-stat-label">–í–∏–∑–∏—Ç–æ–≤</div>
                        </div>
                        <div class="client-stat">
                            <div class="client-stat-value" id="client-stat-sum">0 ‚ÇΩ</div>
                            <div class="client-stat-label">–°—É–º–º–∞</div>
                        </div>
                    </div>
                </div>
                <div class="client-details-grid">
                    <div class="card">
                        <div class="card-title">üöó –ê–≤—Ç–æ–º–æ–±–∏–ª–∏</div>
                        <div id="client-cars-list">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
                    </div>
                    <div class="card">
                        <div class="card-title">üìù –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è</div>
                        <div class="info-row"><strong>–ò–ù–ù:</strong> <span id="client-card-inn">‚Äî</span></div>
                        <div class="info-row"><strong>–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π:</strong> <span id="client-card-comment">‚Äî</span></div>
                    </div>
                </div>
                <div class="card">
                    <div class="card-title">üìã –ò—Å—Ç–æ—Ä–∏—è –∑–∞–∫–∞–∑–æ–≤</div>
                    <div id="client-orders-list">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
                </div>
            </div>

            <!-- Order Form Page -->
            <div id="page-order-form" class="page hidden">
                <div class="page-header">
                    <button class="back-btn" onclick="App.showPage('client-card')">‚Üê –ù–∞–∑–∞–¥</button>
                    <h1>–ù–æ–≤—ã–π –∑–∞–∫–∞–∑-–Ω–∞—Ä—è–¥</h1>
                </div>
                <div class="order-form-grid">
                    <div class="card">
                        <div class="card-title">üë§ –ö–ª–∏–µ–Ω—Ç</div>
                        <div id="order-form-client" class="order-form-info">–ù–µ –≤—ã–±—Ä–∞–Ω</div>
                        <div class="card-title mt-20">üöó –ê–≤—Ç–æ–º–æ–±–∏–ª—å</div>
                        <div id="order-form-cars">–í—ã–±–µ—Ä–∏—Ç–µ –∞–≤—Ç–æ–º–æ–±–∏–ª—å</div>
                        <input type="hidden" id="selected-car-key">
                    </div>
                    <div class="card">
                        <div class="card-title">üìù –î–∞–Ω–Ω—ã–µ –∑–∞–∫–∞–∑–∞</div>
                        <div class="form-row">
                            <div class="form-group">
                                <label>–í–∏–¥ —Ä–µ–º–æ–Ω—Ç–∞</label>
                                <select id="order-repair-type"></select>
                            </div>
                            <div class="form-group">
                                <label>–¶–µ—Ö</label>
                                <select id="order-workshop"></select>
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label>–ü—Ä–æ–±–µ–≥ (–∫–º)</label>
                                <input type="number" id="order-mileage" placeholder="0">
                            </div>
                            <div class="form-group">
                                <label>–ú–∞—Å—Ç–µ—Ä</label>
                                <select id="order-master"></select>
                            </div>
                        </div>
                        <div class="form-group">
                            <label>–ü—Ä–∏—á–∏–Ω–∞ –æ–±—Ä–∞—â–µ–Ω–∏—è</label>
                            <textarea id="order-reason" rows="2"></textarea>
                        </div>
                    </div>
                </div>
                <div class="card">
                    <div class="card-title-row">
                        <span>üîß –†–∞–±–æ—Ç—ã</span>
                        <button class="btn btn-primary btn-sm" onclick="App.openModal('works')">+ –î–æ–±–∞–≤–∏—Ç—å</button>
                    </div>
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>‚Ññ</th>
                                <th>–ù–∞–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ</th>
                                <th>–ö–æ–ª-–≤–æ</th>
                                <th>–¶–µ–Ω–∞</th>
                                <th>–°—É–º–º–∞</th>
                                <th></th>
                            </tr>
                        </thead>
                        <tbody id="works-table">
                            <tr><td colspan="6" class="empty-row">–î–æ–±–∞–≤—å—Ç–µ —Ä–∞–±–æ—Ç—ã</td></tr>
                        </tbody>
                    </table>
                    <div class="table-summary">
                        <span class="summary-label">–ò—Ç–æ–≥–æ —Ä–∞–±–æ—Ç—ã:</span>
                        <span class="summary-value" id="works-sum">0 ‚ÇΩ</span>
                    </div>
                </div>
                <div class="card">
                    <div class="card-title-row">
                        <span>üì¶ –ó–∞–ø—á–∞—Å—Ç–∏</span>
                        <button class="btn btn-primary btn-sm" onclick="App.openModal('parts')">+ –î–æ–±–∞–≤–∏—Ç—å</button>
                    </div>
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>‚Ññ</th>
                                <th>–ù–∞–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ</th>
                                <th>–ö–æ–ª-–≤–æ</th>
                                <th>–¶–µ–Ω–∞</th>
                                <th>–°–∫–∏–¥–∫–∞</th>
                                <th>–°—É–º–º–∞</th>
                                <th></th>
                            </tr>
                        </thead>
                        <tbody id="parts-table">
                            <tr><td colspan="7" class="empty-row">–î–æ–±–∞–≤—å—Ç–µ –∑–∞–ø—á–∞—Å—Ç–∏</td></tr>
                        </tbody>
                    </table>
                    <div class="table-summary">
                        <span class="summary-label">–ò—Ç–æ–≥–æ –∑–∞–ø—á–∞—Å—Ç–∏:</span>
                        <span class="summary-value" id="parts-sum">0 ‚ÇΩ</span>
                    </div>
                </div>
                <div class="card">
                    <div class="order-totals">
                        <div class="total-row">
                            <span class="total-label">–†–∞–±–æ—Ç—ã</span>
                            <span class="total-value" id="total-works">0 ‚ÇΩ</span>
                        </div>
                        <div class="total-row">
                            <span class="total-label">–ó–∞–ø—á–∞—Å—Ç–∏</span>
                            <span class="total-value" id="total-parts">0 ‚ÇΩ</span>
                        </div>
                        <div class="total-row total-main">
                            <span class="total-label">–ò–¢–û–ì–û</span>
                            <span class="total-value" id="total-sum">0 ‚ÇΩ</span>
                        </div>
                    </div>
                    <div class="form-actions">
                        <button class="btn btn-secondary" onclick="App.showPage('client-card')">–û—Ç–º–µ–Ω–∞</button>
                        <div class="spacer"></div>
                        <button class="btn btn-primary" onclick="OrderForm.save()">‚úì –°–æ–∑–¥–∞—Ç—å –∑–∞–∫–∞–∑</button>
                    </div>
                </div>
            </div>

            <!-- Cars Page -->
            <div id="page-cars" class="page hidden">
                <div class="page-header">
                    <h1>–ê–≤—Ç–æ–º–æ–±–∏–ª–∏</h1>
                    <input type="text" class="search-input" id="cars-search" placeholder="üîç –ü–æ–∏—Å–∫ –ø–æ VIN –∏–ª–∏ –Ω–∞–∑–≤–∞–Ω–∏—é...">
                </div>
                <div class="card">
                    <div id="cars-list" class="list-container">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
                </div>
            </div>
        </main>
    </div>

    <!-- Modal: Works Selection -->
    <div id="modal-works" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <strong>–í—ã–±–æ—Ä —Ä–∞–±–æ—Ç—ã</strong>
                <button class="modal-close" onclick="App.closeModal('works')">‚úï</button>
            </div>
            <div class="modal-search">
                <input type="text" placeholder="–ü–æ–∏—Å–∫..." id="works-modal-search">
            </div>
            <div class="modal-body" id="works-modal-list">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
        </div>
    </div>

    <!-- Modal: Parts Selection -->
    <div id="modal-parts" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <strong>–í—ã–±–æ—Ä –∑–∞–ø—á–∞—Å—Ç–∏</strong>
                <button class="modal-close" onclick="App.closeModal('parts')">‚úï</button>
            </div>
            <div class="modal-search">
                <input type="text" placeholder="–ü–æ–∏—Å–∫..." id="parts-modal-search">
            </div>
            <div class="modal-body" id="parts-modal-list">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
        </div>
    </div>

    <!-- Modal: Car Selection -->
    <div id="modal-car-select" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <strong>–í—ã–±–æ—Ä –∞–≤—Ç–æ–º–æ–±–∏–ª—è</strong>
                <button class="modal-close" onclick="App.closeModal('car-select')">‚úï</button>
            </div>
            <div class="modal-search">
                <input type="text" placeholder="–ü–æ–∏—Å–∫ –ø–æ VIN –∏–ª–∏ –Ω–∞–∑–≤–∞–Ω–∏—é..." id="car-select-modal-search">
            </div>
            <div class="modal-body" id="car-select-modal-list">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
        </div>
    </div>

    <!-- Modal: New Client -->
    <div id="modal-new-client" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <strong>–ù–æ–≤—ã–π –∫–ª–∏–µ–Ω—Ç</strong>
                <button class="modal-close" onclick="App.closeModal('new-client')">‚úï</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label>–ù–∞–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ *</label>
                    <input type="text" id="new-client-name" placeholder="–§–ò–û –∏–ª–∏ –Ω–∞–∑–≤–∞–Ω–∏–µ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏">
                </div>
                <div class="form-group">
                    <label>–ò–ù–ù</label>
                    <input type="text" id="new-client-inn" placeholder="–ò–ù–ù">
                </div>
                <div class="form-group">
                    <label>–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π</label>
                    <textarea id="new-client-comment" rows="2"></textarea>
                </div>
                <div class="form-actions">
                    <button class="btn btn-secondary" onclick="App.closeModal('new-client')">–û—Ç–º–µ–Ω–∞</button>
                    <button class="btn btn-primary" onclick="ClientsPage.createClient()">–°–æ–∑–¥–∞—Ç—å</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="/js/api.js"></script>
    <script src="/js/state.js"></script>
    <script src="/js/pages/dashboard.js"></script>
    <script src="/js/pages/clients.js"></script>
    <script src="/js/pages/orders.js"></script>
    <script src="/js/pages/order-form.js"></script>
    <script src="/js/pages/client-card.js"></script>
    <script src="/js/pages/cars.js"></script>
    <script src="/js/app.js"></script>
</body>
</html>
